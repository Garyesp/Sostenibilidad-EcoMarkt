name: ðŸš€ Deploy PHP + Vue (Sin Build)

on:
  push:
    branches: [main, developer]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ Checkout code
      uses: actions/checkout@v4

    - name: ðŸ“¦ Install Composer Dependencies
      run: composer install --no-dev --optimize-autoloader

    - name: ðŸŽ¯ Deploy to Production (ecomarkt.holagary.com)
      if: github.ref == 'refs/heads/main'
      uses: SamKirkland/FTP-Deploy-Action@4.3.0
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME_PROD }}
        password: ${{ secrets.FTP_PASSWORD_PROD }}
        local-dir: ./
        server-dir: ./  

    - name: ðŸ”§ Deploy to Development (dev.ecomarkt.holagary.com)
      if: github.ref == 'refs/heads/developer'
      uses: SamKirkland/FTP-Deploy-Action@4.3.0
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME_DEV }}
        password: ${{ secrets.FTP_PASSWORD_DEV }}
        local-dir: ./
        server-dir: ./ 